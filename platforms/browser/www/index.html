<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <!--meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" /-->
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
    <style type="text/css">

    </style>
</head>

<body>

        <h1>UNIBUS</h1>


        <!--Google Maps Initialize-->
        <div id="geolocation"></div>
        <div id="map"></div>

        <script type="text/javascript">

          // 等待加载PhoneGap
          document.addEventListener("deviceready", onDeviceReady, false);

          // PhoneGap加载完毕
          function onDeviceReady() {
            navigator.geolocation.getCurrentPosition(onSuccess, onError);
          }



          // 获取位置信息成功时调用的回调函数
          function onSuccess(position) {
            var element = document.getElementById('geolocation');
            element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                      'Longitude: '          + position.coords.longitude             + '<br />' +
                      'Altitude: '           + position.coords.altitude              + '<br />' +
                      'Accuracy: '           + position.coords.accuracy              + '<br />' +
                      'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                      'Heading: '            + position.coords.heading               + '<br />' +
                      'Speed: '              + position.coords.speed                 + '<br />' +
                      'Timestamp: '          + new Date(position.timestamp)          + '<br />';

            // alert('Position return successful');
            console.log('Position return successful');
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            console.log('lat:', latitude, 'long:', longitude);

            //    Google Maps API set center:
            map.setCenter({ lat: latitude, lng: longitude});
          }

          // onError回调函数接收一个PositionError对象
          function onError(error) {
            alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
          }

          var map;
          function initMap() {

            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: -34.397, lng: 150.644},
              zoom: 15
            });
            console.log('initMap');

          }

          </script>
          <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA75m90-W_-VaahG6cLo7viMLmBmE7nl-M&callback=initMap"></script>

        <!--Google Maps End-->

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body>

</html>
